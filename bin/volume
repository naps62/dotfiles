#!/bin/bash

sink=$(pactl get-default-sink)

function notify {
  volume=$(pactl get-sink-volume $sink | awk '{ print $5 }')
  muted=$(pactl get-sink-mute $sink | awk '{ print $2 }')

  if [[ $muted == "yes" ]]; then
    msg="$volume (muted)"
  else
    msg="$volume"
  fi
  dunstify --replace=626262 --timeout=3000 "Volume" -h int:value:$volume
}

while [[ $# -gt 0 ]]; do
  case "$1" in
    --up)
      pactl set-sink-volume $sink +5%
      notify
      shift
      shift
      ;;

    --down)
      pactl set-sink-volume $sink -5%
      notify
      shift
      shift
      ;;

    --mute)
      pactl set-sink-mute $sink toggle
      notify
      shift
      shift
  esac
done
