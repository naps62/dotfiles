#!/usr/bin/env ruby

def setup(id)
  `pacmd set-default-sink #{id}`
end

def ensure_bluetooth_is_on!
  output = `pacmd list-sinks | grep bluez`

  if output.strip.empty?
    puts "Please enable bluetooth first"
    `blueman-manager`
  end
end

case ARGV[0]
when 'speakers', '0'
  setup(0)
when 'bluetooth', '1'
  ensure_bluetooth_is_on!
  setup(1)
else puts "Invalid options #{ARGV}"
end
